import { Hono } from "hono";
import { configs } from "./configs";
import { serveStatic } from "hono/bun";

// -------------------------------------------------------------------------------------------------
// -------------------------------------------------------------------------------------------------
// Hono App
const app = new Hono({
  strict: false, // app.get('/hello') will match "GET /hello/"
});

// -------------------------------------------------------------------------------------------------
// -------------------------------------------------------------------------------------------------
// Serve static files from /public directory
app.get(
  "*",
  serveStatic({
    root: "public",
    onFound(path, c) {
      // Called when the file is found. We can set Cache-Control headers here.
      // c.header("Cache-Control", `public, immutable, max-age=31536000`);
    },
  })
);

// -------------------------------------------------------------------------------------------------
// -------------------------------------------------------------------------------------------------
// Routes
app.get("/", (c) => c.text("Hello World!"));

// -------------------------------------------------------------------------------------------------
// -------------------------------------------------------------------------------------------------
export default {
  port: configs.app.port,
  fetch: app.fetch,
};
